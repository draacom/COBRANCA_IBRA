{"ast":null,"code":"import _objectSpread from\"D:/OneDrive/Attachments/\\xC1rea de Trabalho/projetos/COBRANCA_IBRA/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import api from'../services/api';import SuccessModal from'../components/SuccessModal';import ConfirmModal from'../components/ConfirmModal';import useIsMobile from'../utils/useIsMobile';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Subscriptions=()=>{const[subscriptions,setSubscriptions]=useState([]);const[clients,setClients]=useState([]);const[loading,setLoading]=useState(true);const[showForm,setShowForm]=useState(false);const[editingId,setEditingId]=useState(null);const[error,setError]=useState('');const[successOpen,setSuccessOpen]=useState(false);const[successMessage,setSuccessMessage]=useState('');const[generatingCharges,setGeneratingCharges]=useState(false);const isMobile=useIsMobile();// Estados para confirmações\nconst[confirmOpen,setConfirmOpen]=useState(false);const[confirmConfig,setConfirmConfig]=useState({title:'',message:'',type:'warning',onConfirm:null});// Estados para ordenação\nconst[sortField,setSortField]=useState('');const[sortDirection,setSortDirection]=useState('asc');const[formData,setFormData]=useState({client_id:'',amount:'',billing_day:'',send_day:'',method:'boleto',charge_name:''});// Estados para filtros\nconst[filters,setFilters]=useState({name:'',amount:'',method:''});useEffect(()=>{fetchData();fetchClients();},[]);const fetchData=async()=>{try{setLoading(true);const response=await api.get('/subscriptions');// Garantir que sempre seja um array\nconst data=response.data;if(Array.isArray(data)){setSubscriptions(data);}else if(data&&Array.isArray(data.data)){setSubscriptions(data.data);}else{console.warn('Resposta da API não contém um array válido:',data);setSubscriptions([]);}}catch(error){console.error('Erro ao buscar assinaturas',error);setSubscriptions([]);// Garantir que seja um array vazio em caso de erro\n}finally{setLoading(false);}};const fetchClients=async()=>{try{const response=await api.get('/clients');// Garantir que sempre seja um array\nconst data=response.data;if(Array.isArray(data)){setClients(data);}else if(data&&Array.isArray(data.data)){setClients(data.data);}else{console.warn('Resposta da API de clientes não contém um array válido:',data);setClients([]);}}catch(error){console.error('Erro ao buscar clientes',error);setClients([]);// Garantir que seja um array vazio em caso de erro\n}};const formatCurrency=value=>{return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(value);};const formatDate=dateString=>{if(!dateString)return'-';const date=new Date(dateString);return date.toLocaleDateString('pt-BR');};// Função para ordenação\nconst handleSort=field=>{if(sortField===field){setSortDirection(sortDirection==='asc'?'desc':'asc');}else{setSortField(field);setSortDirection('asc');}};// Função para renderizar ícone de ordenação\nconst renderSortIcon=field=>{if(sortField!==field){return/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 ml-1 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"})});}return sortDirection==='asc'?/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 ml-1 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 15l7-7 7 7\"})}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 ml-1 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})});};// Filtrar e ordenar assinaturas\nconst filteredAndSortedSubscriptions=(Array.isArray(subscriptions)?subscriptions:[]).filter(subscription=>{var _subscription$client,_subscription$client$,_subscription$amount;const clientName=((_subscription$client=subscription.client)===null||_subscription$client===void 0?void 0:(_subscription$client$=_subscription$client.name)===null||_subscription$client$===void 0?void 0:_subscription$client$.toLowerCase())||'';const amount=((_subscription$amount=subscription.amount)===null||_subscription$amount===void 0?void 0:_subscription$amount.toString())||'';const method=subscription.method||'';return clientName.includes(filters.name.toLowerCase())&&amount.includes(filters.amount)&&(filters.method===''||method===filters.method);}).sort((a,b)=>{var _a$client,_b$client;if(!sortField)return 0;let aValue,bValue;switch(sortField){case'client':aValue=((_a$client=a.client)===null||_a$client===void 0?void 0:_a$client.name)||'';bValue=((_b$client=b.client)===null||_b$client===void 0?void 0:_b$client.name)||'';break;case'amount':aValue=parseFloat(a.amount)||0;bValue=parseFloat(b.amount)||0;break;case'billing_day':aValue=parseInt(a.billing_day)||0;bValue=parseInt(b.billing_day)||0;break;case'next_billing_date':aValue=new Date(a.next_billing_date||0);bValue=new Date(b.next_billing_date||0);break;case'send_day':aValue=parseInt(a.send_day)||0;bValue=parseInt(b.send_day)||0;break;case'next_send_date':aValue=new Date(a.next_send_date||0);bValue=new Date(b.next_send_date||0);break;case'method':aValue=a.method||'';bValue=b.method||'';break;case'status':aValue=a.active?1:0;bValue=b.active?1:0;break;default:return 0;}if(aValue<bValue)return sortDirection==='asc'?-1:1;if(aValue>bValue)return sortDirection==='asc'?1:-1;return 0;});const handleInputChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleFilterChange=e=>{const{name,value}=e.target;setFilters(_objectSpread(_objectSpread({},filters),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setError('');try{const data={client_id:formData.client_id,amount:parseFloat(formData.amount),billing_day:parseInt(formData.billing_day,10),send_day:formData.send_day?parseInt(formData.send_day,10):undefined,method:formData.method,charge_name:formData.charge_name||undefined};if(editingId){await api.put(\"/subscriptions/\".concat(editingId),data);setSuccessMessage('Assinatura editada com sucesso!');}else{await api.post('/subscriptions',data);setSuccessMessage('Assinatura criada com sucesso!');}setSuccessOpen(true);setShowForm(false);setFormData({client_id:'',amount:'',billing_day:'',send_day:'',method:'boleto',charge_name:''});setEditingId(null);fetchData();}catch(error){var _error$response,_error$response$data;console.error('Erro ao salvar assinatura',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erro ao salvar assinatura. Verifique os dados e tente novamente.');}};const handleEdit=subscription=>{setFormData({client_id:subscription.client_id,amount:subscription.amount.toString(),billing_day:subscription.billing_day.toString(),send_day:subscription.send_day?subscription.send_day.toString():'',method:subscription.method,charge_name:subscription.charge_name||''});setEditingId(subscription.id);setShowForm(true);};const handleActivate=id=>{setConfirmConfig({title:'Reativar Assinatura',message:'Tem certeza que deseja reativar esta assinatura?',type:'info',onConfirm:()=>confirmActivate(id)});setConfirmOpen(true);};const confirmActivate=async id=>{try{await api.post(\"/subscriptions/\".concat(id,\"/activate\"));setSuccessMessage('Assinatura reativada com sucesso!');setSuccessOpen(true);fetchData();}catch(error){console.error('Erro ao reativar assinatura',error);setError('Não foi possível reativar a assinatura. Tente novamente.');}finally{setConfirmOpen(false);}};const handleCancel=id=>{setConfirmConfig({title:'Cancelar Assinatura',message:'Tem certeza que deseja cancelar esta assinatura? Esta ação pode ser revertida posteriormente.',type:'warning',onConfirm:()=>confirmCancel(id)});setConfirmOpen(true);};const confirmCancel=async id=>{try{await api.post(\"/subscriptions/\".concat(id,\"/cancel\"));setSuccessMessage('Assinatura cancelada com sucesso!');setSuccessOpen(true);fetchData();}catch(error){console.error('Erro ao cancelar assinatura',error);setError('Não foi possível cancelar a assinatura. Tente novamente.');}finally{setConfirmOpen(false);}};const handleDelete=(id,clientName)=>{setConfirmConfig({title:'Excluir Assinatura',message:\"Tem certeza que deseja EXCLUIR permanentemente a assinatura de \".concat(clientName,\"?\\n\\nEsta a\\xE7\\xE3o n\\xE3o pode ser desfeita!\"),type:'danger',confirmText:'Excluir',onConfirm:()=>confirmDelete(id)});setConfirmOpen(true);};const confirmDelete=async id=>{try{const response=await api.delete(\"/subscriptions/\".concat(id));setSuccessMessage(response.data.message||'Assinatura excluída com sucesso!');setSuccessOpen(true);fetchData();}catch(error){var _error$response2,_error$response2$data;console.error('Erro ao excluir assinatura',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Não foi possível excluir a assinatura. Tente novamente.';setError(errorMessage);}finally{setConfirmOpen(false);}};const handleGenerateDailyCharges=()=>{const today=new Date();const currentDay=today.getDate();setConfirmConfig({title:'Gerar Cobranças do Dia',message:\"Tem certeza que deseja gerar todas as cobran\\xE7as do dia \".concat(currentDay,\"?\\n\\nEsta a\\xE7\\xE3o ir\\xE1 processar todas as assinaturas ativas que t\\xEAm o dia de envio configurado para hoje.\"),type:'info',confirmText:'Gerar Cobranças',onConfirm:()=>confirmGenerateDailyCharges()});setConfirmOpen(true);};const confirmGenerateDailyCharges=async()=>{try{setGeneratingCharges(true);setConfirmOpen(false);const response=await api.post('/subscriptions/generate-daily-charges');if(response.data.success){const{generated,errors,total_processed,details}=response.data;let message=\"Processamento conclu\\xEDdo!\\n\\n\";message+=\"\\u2022 Total processado: \".concat(total_processed,\" assinatura(s)\\n\");message+=\"\\u2022 Cobran\\xE7as geradas: \".concat(generated,\"\\n\");if(errors>0){message+=\"\\u2022 Erros: \".concat(errors,\"\\n\");}// Mostrar detalhes das cobranças geradas\nconst successfulCharges=details.filter(d=>d.status==='success');if(successfulCharges.length>0){message+=\"\\nCobran\\xE7as geradas:\\n\";successfulCharges.forEach(charge=>{message+=\"\\u2022 \".concat(charge.client_name,\" - \").concat(charge.title,\" - R$ \").concat(charge.amount.toFixed(2),\"\\n\");});}const skippedCharges=details.filter(d=>d.status==='skipped');if(skippedCharges.length>0){message+=\"\\nCobran\\xE7as ignoradas (j\\xE1 existem):\\n\";skippedCharges.forEach(charge=>{message+=\"\\u2022 \".concat(charge.client_name,\"\\n\");});}setSuccessMessage(message);setSuccessOpen(true);// Recarregar dados se necessário\nif(generated>0){fetchData();}}else{setError(response.data.message||'Erro ao gerar cobranças');}}catch(error){var _error$response3,_error$response3$data;console.error('Erro ao gerar cobranças do dia:',error);setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Erro ao gerar cobranças do dia. Tente novamente.');}finally{setGeneratingCharges(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full px-2 sm:px-4 lg:px-6\",children:[/*#__PURE__*/_jsx(SuccessModal,{open:successOpen,message:successMessage,onClose:()=>setSuccessOpen(false)}),/*#__PURE__*/_jsx(ConfirmModal,{open:confirmOpen,title:confirmConfig.title,message:confirmConfig.message,type:confirmConfig.type,confirmText:confirmConfig.confirmText||'Confirmar',onConfirm:confirmConfig.onConfirm,onCancel:()=>setConfirmOpen(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Assinaturas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateDailyCharges,disabled:generatingCharges,className:\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\",children:generatingCharges?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Gerando...\"]}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\uD83D\\uDD04 Gerar Cobran\\xE7as do Dia\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFormData({client_id:'',amount:'',billing_day:'',send_day:'',method:'boleto',charge_name:''});setEditingId(null);setShowForm(!showForm);},className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:showForm?'Cancelar':'Nova Assinatura'})]})]}),showForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium mb-4\",children:editingId?'Editar Assinatura':'Nova Assinatura'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-l-4 border-red-500 p-4 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700\",children:error})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-6 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"charge_name\",className:\"block text-sm font-medium text-gray-700\",children:\"Nome da cobran\\xE7a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"charge_name\",id:\"charge_name\",placeholder:\"Ex.: Assinatura Premium\",value:formData.charge_name,onChange:handleInputChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"client_id\",className:\"block text-sm font-medium text-gray-700\",children:\"Cliente\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"client_id\",name:\"client_id\",required:true,value:formData.client_id,onChange:handleInputChange,className:\"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione um cliente\"}),clients.map(client=>/*#__PURE__*/_jsx(\"option\",{value:client.id,children:client.name&&client.name.trim()!==''?client.name:client.email},client.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",className:\"block text-sm font-medium text-gray-700\",children:\"Valor (R$)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",id:\"amount\",required:true,min:\"0.01\",step:\"0.01\",value:formData.amount,onChange:handleInputChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"billing_day\",className:\"block text-sm font-medium text-gray-700\",children:\"Dia de cobran\\xE7a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"billing_day\",id:\"billing_day\",required:true,min:\"1\",max:\"28\",value:formData.billing_day,onChange:handleInputChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"method\",className:\"block text-sm font-medium text-gray-700\",children:\"M\\xE9todo de pagamento\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"method\",name:\"method\",required:true,value:formData.method,onChange:handleInputChange,className:\"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"boleto\",children:\"Boleto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pix\",children:\"PIX\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"send_day\",className:\"block text-sm font-medium text-gray-700\",children:\"Dia de envio da cobran\\xE7a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"send_day\",id:\"send_day\",min:\"1\",max:\"28\",value:formData.send_day,onChange:handleInputChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowForm(false),className:\"mr-3 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Salvar\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium mb-4\",children:\"Filtros\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filter-name\",className:\"block text-sm font-medium text-gray-700\",children:\"Nome do Cliente\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"filter-name\",name:\"name\",placeholder:\"Filtrar por nome...\",value:filters.name,onChange:handleFilterChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filter-amount\",className:\"block text-sm font-medium text-gray-700\",children:\"Valor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"filter-amount\",name:\"amount\",placeholder:\"Filtrar por valor...\",value:filters.amount,onChange:handleFilterChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filter-method\",className:\"block text-sm font-medium text-gray-700\",children:\"Forma de Pagamento\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"filter-method\",name:\"method\",value:filters.method,onChange:handleFilterChange,className:\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"boleto\",children:\"Boleto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pix\",children:\"PIX\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center\",children:\"Carregando...\"}):filteredAndSortedSubscriptions.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"Nenhuma assinatura encontrada\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:isMobile?/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:filteredAndSortedSubscriptions.map(subscription=>{var _subscription$client2,_subscription$client3;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 truncate\",children:(_subscription$client2=subscription.client)!==null&&_subscription$client2!==void 0&&_subscription$client2.name&&subscription.client.name.trim()!==''?subscription.client.name:((_subscription$client3=subscription.client)===null||_subscription$client3===void 0?void 0:_subscription$client3.email)||'Cliente não encontrado'}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[\"M\\xE9todo: \",subscription.method==='boleto'?'Boleto':'PIX']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[\"Dia de cobran\\xE7a: \",subscription.billing_day]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[\"Pr\\xF3xima cobran\\xE7a: \",formatDate(subscription.next_billing_date)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[\"Dia de envio: \",subscription.send_day||'-']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[\"Pr\\xF3ximo envio: \",formatDate(subscription.next_send_date)]}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-2 inline-flex text-xs leading-5 font-semibold rounded-full \".concat(subscription.active?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:subscription.active?'Ativa':'Cancelada'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-700\",children:formatCurrency(subscription.amount)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(subscription),className:\"px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded\",title:\"Editar assinatura\",children:\"Editar\"}),subscription.active?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancel(subscription.id),className:\"px-2 py-1 text-xs font-medium text-yellow-700 bg-yellow-100 rounded\",title:\"Cancelar assinatura\",children:\"Cancelar\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleActivate(subscription.id),className:\"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded\",title:\"Reativar assinatura\",children:\"Reativar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _subscription$client4,_subscription$client5;return handleDelete(subscription.id,(_subscription$client4=subscription.client)!==null&&_subscription$client4!==void 0&&_subscription$client4.name&&subscription.client.name.trim()!==''?subscription.client.name:((_subscription$client5=subscription.client)===null||_subscription$client5===void 0?void 0:_subscription$client5.email)||'Cliente');},className:\"px-2 py-1 text-xs font-medium text-red-700 bg-red-100 rounded\",title:\"Excluir permanentemente\",children:\"Excluir\"})]})]},subscription.id);})}):/*#__PURE__*/_jsxs(\"table\",{className:\"w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/6\",onClick:()=>handleSort('client'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Cliente\",renderSortIcon('client')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\",onClick:()=>handleSort('amount'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Valor\",renderSortIcon('amount')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\",onClick:()=>handleSort('billing_day'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Dia de cobran\\xE7a\",renderSortIcon('billing_day')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/8\",onClick:()=>handleSort('next_billing_date'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Pr\\xF3xima cobran\\xE7a\",renderSortIcon('next_billing_date')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\",onClick:()=>handleSort('send_day'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Dia de envio\",renderSortIcon('send_day')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/8\",onClick:()=>handleSort('next_send_date'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Pr\\xF3ximo envio\",renderSortIcon('next_send_date')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\",onClick:()=>handleSort('method'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"M\\xE9todo\",renderSortIcon('method')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\",onClick:()=>handleSort('status'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[\"Status\",renderSortIcon('status')]})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"relative px-4 py-3 w-1/4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"A\\xE7\\xF5es\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredAndSortedSubscriptions.map(subscription=>{var _subscription$client6,_subscription$client7;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:(_subscription$client6=subscription.client)!==null&&_subscription$client6!==void 0&&_subscription$client6.name&&subscription.client.name.trim()!==''?subscription.client.name:((_subscription$client7=subscription.client)===null||_subscription$client7===void 0?void 0:_subscription$client7.email)||'Cliente não encontrado'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:formatCurrency(subscription.amount)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:subscription.billing_day})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:formatDate(subscription.next_billing_date)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:subscription.send_day||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:formatDate(subscription.next_send_date)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:subscription.method==='boleto'?'Boleto':'PIX'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \".concat(subscription.active?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:subscription.active?'Ativa':'Cancelada'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleEdit(subscription),className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200\",title:\"Editar assinatura\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})}),\"Editar\"]}),subscription.active?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCancel(subscription.id),className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors duration-200\",title:\"Cancelar assinatura\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"Cancelar\"]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleActivate(subscription.id),className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200\",title:\"Reativar assinatura\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"Reativar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _subscription$client8,_subscription$client9;return handleDelete(subscription.id,(_subscription$client8=subscription.client)!==null&&_subscription$client8!==void 0&&_subscription$client8.name&&subscription.client.name.trim()!==''?subscription.client.name:((_subscription$client9=subscription.client)===null||_subscription$client9===void 0?void 0:_subscription$client9.email)||'Cliente');},className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200\",title:\"Excluir permanentemente\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})}),\"Excluir\"]})]})})]},subscription.id);})})]})})})]});};export default Subscriptions;","map":{"version":3,"names":["React","useState","useEffect","api","SuccessModal","ConfirmModal","useIsMobile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Subscriptions","subscriptions","setSubscriptions","clients","setClients","loading","setLoading","showForm","setShowForm","editingId","setEditingId","error","setError","successOpen","setSuccessOpen","successMessage","setSuccessMessage","generatingCharges","setGeneratingCharges","isMobile","confirmOpen","setConfirmOpen","confirmConfig","setConfirmConfig","title","message","type","onConfirm","sortField","setSortField","sortDirection","setSortDirection","formData","setFormData","client_id","amount","billing_day","send_day","method","charge_name","filters","setFilters","name","fetchData","fetchClients","response","get","data","Array","isArray","console","warn","formatCurrency","value","Intl","NumberFormat","style","currency","format","formatDate","dateString","date","Date","toLocaleDateString","handleSort","field","renderSortIcon","className","fill","stroke","viewBox","children","strokeLinecap","strokeLinejoin","strokeWidth","d","filteredAndSortedSubscriptions","filter","subscription","_subscription$client","_subscription$client$","_subscription$amount","clientName","client","toLowerCase","toString","includes","sort","a","b","_a$client","_b$client","aValue","bValue","parseFloat","parseInt","next_billing_date","next_send_date","active","handleInputChange","e","target","_objectSpread","handleFilterChange","handleSubmit","preventDefault","undefined","put","concat","post","_error$response","_error$response$data","handleEdit","id","handleActivate","confirmActivate","handleCancel","confirmCancel","handleDelete","confirmText","confirmDelete","delete","_error$response2","_error$response2$data","errorMessage","handleGenerateDailyCharges","today","currentDay","getDate","confirmGenerateDailyCharges","success","generated","errors","total_processed","details","successfulCharges","status","length","forEach","charge","client_name","toFixed","skippedCharges","_error$response3","_error$response3$data","open","onClose","onCancel","onClick","disabled","xmlns","cx","cy","r","onSubmit","htmlFor","placeholder","onChange","required","map","trim","email","min","step","max","_subscription$client2","_subscription$client3","_subscription$client4","_subscription$client5","scope","_subscription$client6","_subscription$client7","_subscription$client8","_subscription$client9"],"sources":["D:/OneDrive/Attachments/Área de Trabalho/projetos/COBRANCA_IBRA/frontend/src/pages/Subscriptions.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../services/api';\r\nimport SuccessModal from '../components/SuccessModal';\r\nimport ConfirmModal from '../components/ConfirmModal';\r\nimport useIsMobile from '../utils/useIsMobile';\r\n\r\nconst Subscriptions = () => {\r\n  const [subscriptions, setSubscriptions] = useState([]);\r\n  const [clients, setClients] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [successOpen, setSuccessOpen] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [generatingCharges, setGeneratingCharges] = useState(false);\r\n  const isMobile = useIsMobile();\r\n  \r\n  // Estados para confirmações\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [confirmConfig, setConfirmConfig] = useState({\r\n    title: '',\r\n    message: '',\r\n    type: 'warning',\r\n    onConfirm: null\r\n  });\r\n  \r\n  // Estados para ordenação\r\n  const [sortField, setSortField] = useState('');\r\n  const [sortDirection, setSortDirection] = useState('asc');\r\n  \r\n  const [formData, setFormData] = useState({\r\n    client_id: '',\r\n    amount: '',\r\n    billing_day: '',\r\n    send_day: '',\r\n    method: 'boleto',\r\n    charge_name: ''\r\n  });\r\n\r\n  // Estados para filtros\r\n  const [filters, setFilters] = useState({\r\n    name: '',\r\n    amount: '',\r\n    method: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    fetchClients();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('/subscriptions');\r\n      // Garantir que sempre seja um array\r\n      const data = response.data;\r\n      if (Array.isArray(data)) {\r\n        setSubscriptions(data);\r\n      } else if (data && Array.isArray(data.data)) {\r\n        setSubscriptions(data.data);\r\n      } else {\r\n        console.warn('Resposta da API não contém um array válido:', data);\r\n        setSubscriptions([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao buscar assinaturas', error);\r\n      setSubscriptions([]); // Garantir que seja um array vazio em caso de erro\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchClients = async () => {\r\n    try {\r\n      const response = await api.get('/clients');\r\n      // Garantir que sempre seja um array\r\n      const data = response.data;\r\n      if (Array.isArray(data)) {\r\n        setClients(data);\r\n      } else if (data && Array.isArray(data.data)) {\r\n        setClients(data.data);\r\n      } else {\r\n        console.warn('Resposta da API de clientes não contém um array válido:', data);\r\n        setClients([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao buscar clientes', error);\r\n      setClients([]); // Garantir que seja um array vazio em caso de erro\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (value) => {\r\n    return new Intl.NumberFormat('pt-BR', {\r\n      style: 'currency',\r\n      currency: 'BRL'\r\n    }).format(value);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '-';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('pt-BR');\r\n  };\r\n\r\n  // Função para ordenação\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n  };\r\n\r\n  // Função para renderizar ícone de ordenação\r\n  const renderSortIcon = (field) => {\r\n    if (sortField !== field) {\r\n      return (\r\n        <svg className=\"w-4 h-4 ml-1 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\" />\r\n        </svg>\r\n      );\r\n    }\r\n    \r\n    return sortDirection === 'asc' ? (\r\n      <svg className=\"w-4 h-4 ml-1 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\r\n      </svg>\r\n    ) : (\r\n      <svg className=\"w-4 h-4 ml-1 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  // Filtrar e ordenar assinaturas\r\n  const filteredAndSortedSubscriptions = (Array.isArray(subscriptions) ? subscriptions : [])\r\n    .filter(subscription => {\r\n      const clientName = subscription.client?.name?.toLowerCase() || '';\r\n      const amount = subscription.amount?.toString() || '';\r\n      const method = subscription.method || '';\r\n      \r\n      return (\r\n        clientName.includes(filters.name.toLowerCase()) &&\r\n        amount.includes(filters.amount) &&\r\n        (filters.method === '' || method === filters.method)\r\n      );\r\n    })\r\n    .sort((a, b) => {\r\n      if (!sortField) return 0;\r\n      \r\n      let aValue, bValue;\r\n      \r\n      switch (sortField) {\r\n        case 'client':\r\n          aValue = a.client?.name || '';\r\n          bValue = b.client?.name || '';\r\n          break;\r\n        case 'amount':\r\n          aValue = parseFloat(a.amount) || 0;\r\n          bValue = parseFloat(b.amount) || 0;\r\n          break;\r\n        case 'billing_day':\r\n          aValue = parseInt(a.billing_day) || 0;\r\n          bValue = parseInt(b.billing_day) || 0;\r\n          break;\r\n        case 'next_billing_date':\r\n          aValue = new Date(a.next_billing_date || 0);\r\n          bValue = new Date(b.next_billing_date || 0);\r\n          break;\r\n        case 'send_day':\r\n          aValue = parseInt(a.send_day) || 0;\r\n          bValue = parseInt(b.send_day) || 0;\r\n          break;\r\n        case 'next_send_date':\r\n          aValue = new Date(a.next_send_date || 0);\r\n          bValue = new Date(b.next_send_date || 0);\r\n          break;\r\n        case 'method':\r\n          aValue = a.method || '';\r\n          bValue = b.method || '';\r\n          break;\r\n        case 'status':\r\n          aValue = a.active ? 1 : 0;\r\n          bValue = b.active ? 1 : 0;\r\n          break;\r\n        default:\r\n          return 0;\r\n      }\r\n      \r\n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\r\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFilters({ ...filters, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    \r\n    try {\r\n      const data = {\r\n        client_id: formData.client_id,\r\n        amount: parseFloat(formData.amount),\r\n        billing_day: parseInt(formData.billing_day, 10),\r\n        send_day: formData.send_day ? parseInt(formData.send_day, 10) : undefined,\r\n        method: formData.method,\r\n        charge_name: formData.charge_name || undefined\r\n      };\r\n      \r\n      if (editingId) {\r\n        await api.put(`/subscriptions/${editingId}`, data);\r\n        setSuccessMessage('Assinatura editada com sucesso!');\r\n      } else {\r\n        await api.post('/subscriptions', data);\r\n        setSuccessMessage('Assinatura criada com sucesso!');\r\n      }\r\n      setSuccessOpen(true);\r\n      \r\n      setShowForm(false);\r\n      setFormData({\r\n        client_id: '',\r\n        amount: '',\r\n        billing_day: '',\r\n        send_day: '',\r\n        method: 'boleto',\r\n        charge_name: ''\r\n      });\r\n      setEditingId(null);\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Erro ao salvar assinatura', error);\r\n      setError(error.response?.data?.message || 'Erro ao salvar assinatura. Verifique os dados e tente novamente.');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (subscription) => {\r\n    setFormData({\r\n      client_id: subscription.client_id,\r\n      amount: subscription.amount.toString(),\r\n      billing_day: subscription.billing_day.toString(),\r\n      send_day: subscription.send_day ? subscription.send_day.toString() : '',\r\n      method: subscription.method,\r\n      charge_name: subscription.charge_name || ''\r\n    });\r\n    setEditingId(subscription.id);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleActivate = (id) => {\r\n    setConfirmConfig({\r\n      title: 'Reativar Assinatura',\r\n      message: 'Tem certeza que deseja reativar esta assinatura?',\r\n      type: 'info',\r\n      onConfirm: () => confirmActivate(id)\r\n    });\r\n    setConfirmOpen(true);\r\n  };\r\n\r\n  const confirmActivate = async (id) => {\r\n    try {\r\n      await api.post(`/subscriptions/${id}/activate`);\r\n      setSuccessMessage('Assinatura reativada com sucesso!');\r\n      setSuccessOpen(true);\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Erro ao reativar assinatura', error);\r\n      setError('Não foi possível reativar a assinatura. Tente novamente.');\r\n    } finally {\r\n      setConfirmOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = (id) => {\r\n    setConfirmConfig({\r\n      title: 'Cancelar Assinatura',\r\n      message: 'Tem certeza que deseja cancelar esta assinatura? Esta ação pode ser revertida posteriormente.',\r\n      type: 'warning',\r\n      onConfirm: () => confirmCancel(id)\r\n    });\r\n    setConfirmOpen(true);\r\n  };\r\n\r\n  const confirmCancel = async (id) => {\r\n    try {\r\n      await api.post(`/subscriptions/${id}/cancel`);\r\n      setSuccessMessage('Assinatura cancelada com sucesso!');\r\n      setSuccessOpen(true);\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Erro ao cancelar assinatura', error);\r\n      setError('Não foi possível cancelar a assinatura. Tente novamente.');\r\n    } finally {\r\n      setConfirmOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = (id, clientName) => {\r\n    setConfirmConfig({\r\n      title: 'Excluir Assinatura',\r\n      message: `Tem certeza que deseja EXCLUIR permanentemente a assinatura de ${clientName}?\\n\\nEsta ação não pode ser desfeita!`,\r\n      type: 'danger',\r\n      confirmText: 'Excluir',\r\n      onConfirm: () => confirmDelete(id)\r\n    });\r\n    setConfirmOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async (id) => {\r\n    try {\r\n      const response = await api.delete(`/subscriptions/${id}`);\r\n      setSuccessMessage(response.data.message || 'Assinatura excluída com sucesso!');\r\n      setSuccessOpen(true);\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Erro ao excluir assinatura', error);\r\n      const errorMessage = error.response?.data?.message || 'Não foi possível excluir a assinatura. Tente novamente.';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setConfirmOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleGenerateDailyCharges = () => {\r\n    const today = new Date();\r\n    const currentDay = today.getDate();\r\n    \r\n    setConfirmConfig({\r\n      title: 'Gerar Cobranças do Dia',\r\n      message: `Tem certeza que deseja gerar todas as cobranças do dia ${currentDay}?\\n\\nEsta ação irá processar todas as assinaturas ativas que têm o dia de envio configurado para hoje.`,\r\n      type: 'info',\r\n      confirmText: 'Gerar Cobranças',\r\n      onConfirm: () => confirmGenerateDailyCharges()\r\n    });\r\n    setConfirmOpen(true);\r\n  };\r\n\r\n  const confirmGenerateDailyCharges = async () => {\r\n    try {\r\n      setGeneratingCharges(true);\r\n      setConfirmOpen(false);\r\n      \r\n      const response = await api.post('/subscriptions/generate-daily-charges');\r\n      \r\n      if (response.data.success) {\r\n        const { generated, errors, total_processed, details } = response.data;\r\n        \r\n        let message = `Processamento concluído!\\n\\n`;\r\n        message += `• Total processado: ${total_processed} assinatura(s)\\n`;\r\n        message += `• Cobranças geradas: ${generated}\\n`;\r\n        if (errors > 0) {\r\n          message += `• Erros: ${errors}\\n`;\r\n        }\r\n        \r\n        // Mostrar detalhes das cobranças geradas\r\n        const successfulCharges = details.filter(d => d.status === 'success');\r\n        if (successfulCharges.length > 0) {\r\n          message += `\\nCobranças geradas:\\n`;\r\n          successfulCharges.forEach(charge => {\r\n            message += `• ${charge.client_name} - ${charge.title} - R$ ${charge.amount.toFixed(2)}\\n`;\r\n          });\r\n        }\r\n        \r\n        const skippedCharges = details.filter(d => d.status === 'skipped');\r\n        if (skippedCharges.length > 0) {\r\n          message += `\\nCobranças ignoradas (já existem):\\n`;\r\n          skippedCharges.forEach(charge => {\r\n            message += `• ${charge.client_name}\\n`;\r\n          });\r\n        }\r\n        \r\n        setSuccessMessage(message);\r\n        setSuccessOpen(true);\r\n        \r\n        // Recarregar dados se necessário\r\n        if (generated > 0) {\r\n          fetchData();\r\n        }\r\n      } else {\r\n        setError(response.data.message || 'Erro ao gerar cobranças');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao gerar cobranças do dia:', error);\r\n      setError(error.response?.data?.message || 'Erro ao gerar cobranças do dia. Tente novamente.');\r\n    } finally {\r\n      setGeneratingCharges(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full px-2 sm:px-4 lg:px-6\">\r\n      <SuccessModal open={successOpen} message={successMessage} onClose={() => setSuccessOpen(false)} />\r\n      <ConfirmModal \r\n        open={confirmOpen} \r\n        title={confirmConfig.title}\r\n        message={confirmConfig.message}\r\n        type={confirmConfig.type}\r\n        confirmText={confirmConfig.confirmText || 'Confirmar'}\r\n        onConfirm={confirmConfig.onConfirm}\r\n        onCancel={() => setConfirmOpen(false)}\r\n      />\r\n      \r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-semibold text-gray-900\">Assinaturas</h1>\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={handleGenerateDailyCharges}\r\n            disabled={generatingCharges}\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n          >\r\n            {generatingCharges ? (\r\n              <>\r\n                <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n                Gerando...\r\n              </>\r\n            ) : (\r\n              <>\r\n                🔄 Gerar Cobranças do Dia\r\n              </>\r\n            )}\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              setFormData({\r\n                client_id: '',\r\n                amount: '',\r\n                billing_day: '',\r\n                send_day: '',\r\n                method: 'boleto',\r\n                charge_name: ''\r\n              });\r\n              setEditingId(null);\r\n              setShowForm(!showForm);\r\n            }}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {showForm ? 'Cancelar' : 'Nova Assinatura'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <div className=\"bg-white shadow rounded-lg p-6 mb-6\">\r\n          <h2 className=\"text-lg font-medium mb-4\">\r\n            {editingId ? 'Editar Assinatura' : 'Nova Assinatura'}\r\n          </h2>\r\n          \r\n          {error && (\r\n            <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-4\">\r\n              <p className=\"text-red-700\">{error}</p>\r\n            </div>\r\n          )}\r\n          \r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\r\n              <div>\r\n                <label htmlFor=\"charge_name\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Nome da cobrança\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"charge_name\"\r\n                  id=\"charge_name\"\r\n                  placeholder=\"Ex.: Assinatura Premium\"\r\n                  value={formData.charge_name}\r\n                  onChange={handleInputChange}\r\n                  className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"client_id\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Cliente\r\n                </label>\r\n                <select\r\n                  id=\"client_id\"\r\n                  name=\"client_id\"\r\n                  required\r\n                  value={formData.client_id}\r\n                  onChange={handleInputChange}\r\n                  className=\"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                >\r\n                  <option value=\"\">Selecione um cliente</option>\r\n                  {clients.map((client) => (\r\n                    <option key={client.id} value={client.id}>\r\n                      {client.name && client.name.trim() !== '' ? client.name : client.email}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"amount\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Valor (R$)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"amount\"\r\n                  id=\"amount\"\r\n                  required\r\n                  min=\"0.01\"\r\n                  step=\"0.01\"\r\n                  value={formData.amount}\r\n                  onChange={handleInputChange}\r\n                  className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"billing_day\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Dia de cobrança\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"billing_day\"\r\n                  id=\"billing_day\"\r\n                  required\r\n                  min=\"1\"\r\n                  max=\"28\"\r\n                  value={formData.billing_day}\r\n                  onChange={handleInputChange}\r\n                  className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"method\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Método de pagamento\r\n                </label>\r\n                <select\r\n                  id=\"method\"\r\n                  name=\"method\"\r\n                  required\r\n                  value={formData.method}\r\n                  onChange={handleInputChange}\r\n                  className=\"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                >\r\n                  <option value=\"boleto\">Boleto</option>\r\n                  <option value=\"pix\">PIX</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"send_day\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Dia de envio da cobrança\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"send_day\"\r\n                  id=\"send_day\"\r\n                  min=\"1\"\r\n                  max=\"28\"\r\n                  value={formData.send_day}\r\n                  onChange={handleInputChange}\r\n                  className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"mt-6 flex justify-end\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowForm(false)}\r\n                className=\"mr-3 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n              >\r\n                Salvar\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Filtros */}\r\n      <div className=\"bg-white shadow rounded-lg p-6 mb-6\">\r\n        <h3 className=\"text-lg font-medium mb-4\">Filtros</h3>\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">\r\n          <div>\r\n            <label htmlFor=\"filter-name\" className=\"block text-sm font-medium text-gray-700\">\r\n              Nome do Cliente\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"filter-name\"\r\n              name=\"name\"\r\n              placeholder=\"Filtrar por nome...\"\r\n              value={filters.name}\r\n              onChange={handleFilterChange}\r\n              className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"filter-amount\" className=\"block text-sm font-medium text-gray-700\">\r\n              Valor\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"filter-amount\"\r\n              name=\"amount\"\r\n              placeholder=\"Filtrar por valor...\"\r\n              value={filters.amount}\r\n              onChange={handleFilterChange}\r\n              className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"filter-method\" className=\"block text-sm font-medium text-gray-700\">\r\n              Forma de Pagamento\r\n            </label>\r\n            <select\r\n              id=\"filter-method\"\r\n              name=\"method\"\r\n              value={filters.method}\r\n              onChange={handleFilterChange}\r\n              className=\"mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\"\r\n            >\r\n              <option value=\"\">Todas</option>\r\n              <option value=\"boleto\">Boleto</option>\r\n              <option value=\"pix\">PIX</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabela com largura aumentada e ordenação */}\r\n      <div className=\"bg-white shadow rounded-lg\">\r\n        {loading ? (\r\n          <div className=\"p-4 text-center\">Carregando...</div>\r\n        ) : filteredAndSortedSubscriptions.length === 0 ? (\r\n          <div className=\"p-4 text-center text-gray-500\">Nenhuma assinatura encontrada</div>\r\n        ) : (\r\n          <div className=\"w-full\">\r\n            {isMobile ? (\r\n              <div className=\"divide-y divide-gray-200\">\r\n                {filteredAndSortedSubscriptions.map((subscription) => (\r\n                  <div key={subscription.id} className=\"p-4 bg-white\">\r\n                    <div className=\"flex justify-between\">\r\n                      <div className=\"min-w-0\">\r\n                        <div className=\"text-sm font-medium text-gray-900 truncate\">\r\n                          {subscription.client?.name && subscription.client.name.trim() !== '' ? subscription.client.name : subscription.client?.email || 'Cliente não encontrado'}\r\n                        </div>\r\n                        <div className=\"mt-1 text-xs text-gray-500\">Método: {subscription.method === 'boleto' ? 'Boleto' : 'PIX'}</div>\r\n                        <div className=\"mt-1 text-xs text-gray-500\">Dia de cobrança: {subscription.billing_day}</div>\r\n                        <div className=\"mt-1 text-xs text-gray-500\">Próxima cobrança: {formatDate(subscription.next_billing_date)}</div>\r\n                        <div className=\"mt-1 text-xs text-gray-500\">Dia de envio: {subscription.send_day || '-'}</div>\r\n                        <div className=\"mt-1 text-xs text-gray-500\">Próximo envio: {formatDate(subscription.next_send_date)}</div>\r\n                        <span className={`mt-2 inline-flex text-xs leading-5 font-semibold rounded-full ${subscription.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                          {subscription.active ? 'Ativa' : 'Cancelada'}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <div className=\"text-sm text-gray-700\">{formatCurrency(subscription.amount)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-3 flex items-center justify-end space-x-2\">\r\n                      <button\r\n                        onClick={() => handleEdit(subscription)}\r\n                        className=\"px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded\"\r\n                        title=\"Editar assinatura\"\r\n                      >\r\n                        Editar\r\n                      </button>\r\n                      {subscription.active ? (\r\n                        <button\r\n                          onClick={() => handleCancel(subscription.id)}\r\n                          className=\"px-2 py-1 text-xs font-medium text-yellow-700 bg-yellow-100 rounded\"\r\n                          title=\"Cancelar assinatura\"\r\n                        >\r\n                          Cancelar\r\n                        </button>\r\n                      ) : (\r\n                        <button\r\n                          onClick={() => handleActivate(subscription.id)}\r\n                          className=\"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded\"\r\n                          title=\"Reativar assinatura\"\r\n                        >\r\n                          Reativar\r\n                        </button>\r\n                      )}\r\n                      <button\r\n                        onClick={() => handleDelete(subscription.id, subscription.client?.name && subscription.client.name.trim() !== '' ? subscription.client.name : subscription.client?.email || 'Cliente')}\r\n                        className=\"px-2 py-1 text-xs font-medium text-red-700 bg-red-100 rounded\"\r\n                        title=\"Excluir permanentemente\"\r\n                      >\r\n                        Excluir\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n            <table className=\"w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/6\"\r\n                    onClick={() => handleSort('client')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Cliente\r\n                      {renderSortIcon('client')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\"\r\n                    onClick={() => handleSort('amount')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Valor\r\n                      {renderSortIcon('amount')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\"\r\n                    onClick={() => handleSort('billing_day')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Dia de cobrança\r\n                      {renderSortIcon('billing_day')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/8\"\r\n                    onClick={() => handleSort('next_billing_date')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Próxima cobrança\r\n                      {renderSortIcon('next_billing_date')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\"\r\n                    onClick={() => handleSort('send_day')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Dia de envio\r\n                      {renderSortIcon('send_day')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/8\"\r\n                    onClick={() => handleSort('next_send_date')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Próximo envio\r\n                      {renderSortIcon('next_send_date')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\"\r\n                    onClick={() => handleSort('method')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Método\r\n                      {renderSortIcon('method')}\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    scope=\"col\" \r\n                    className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none w-1/12\"\r\n                    onClick={() => handleSort('status')}\r\n                  >\r\n                    <div className=\"flex items-center\">\r\n                      Status\r\n                      {renderSortIcon('status')}\r\n                    </div>\r\n                  </th>\r\n                  <th scope=\"col\" className=\"relative px-4 py-3 w-1/4\">\r\n                    <span className=\"sr-only\">Ações</span>\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {filteredAndSortedSubscriptions.map((subscription) => (\r\n                  <tr key={subscription.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">\r\n                        {subscription.client?.name && subscription.client.name.trim() !== '' ? subscription.client.name : subscription.client?.email || 'Cliente não encontrado'}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {formatCurrency(subscription.amount)}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {subscription.billing_day}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {formatDate(subscription.next_billing_date)}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {subscription.send_day || '-'}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {formatDate(subscription.next_send_date)}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {subscription.method === 'boleto' ? 'Boleto' : 'PIX'}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                      <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${subscription.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                        {subscription.active ? 'Ativa' : 'Cancelada'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                      <div className=\"flex justify-end space-x-2\">\r\n                        <button\r\n                          onClick={() => handleEdit(subscription)}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200\"\r\n                          title=\"Editar assinatura\"\r\n                        >\r\n                          <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n                          </svg>\r\n                          Editar\r\n                        </button>\r\n                        \r\n                        {subscription.active ? (\r\n                          <button\r\n                            onClick={() => handleCancel(subscription.id)}\r\n                            className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors duration-200\"\r\n                            title=\"Cancelar assinatura\"\r\n                          >\r\n                            <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                            Cancelar\r\n                          </button>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => handleActivate(subscription.id)}\r\n                            className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200\"\r\n                            title=\"Reativar assinatura\"\r\n                          >\r\n                            <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                            Reativar\r\n                          </button>\r\n                        )}\r\n                        \r\n                        <button\r\n                          onClick={() => handleDelete(subscription.id, subscription.client?.name && subscription.client.name.trim() !== '' ? subscription.client.name : subscription.client?.email || 'Cliente')}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200\"\r\n                          title=\"Excluir permanentemente\"\r\n                        >\r\n                          <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                          </svg>\r\n                          Excluir\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Subscriptions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}