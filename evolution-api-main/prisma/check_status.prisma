generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_CONNECTION_URI")
}

model Chat {
  id             String    @id
  remoteJid      String    @db.VarChar(100)
  name           String?   @db.VarChar(100)
  labels         String?   @db.LongText
  createdAt      DateTime? @default(now()) @db.Timestamp(0)
  updatedAt      DateTime? @db.Timestamp(0)
  instanceId     String
  unreadMessages Int       @default(0)
  Instance       Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@unique([instanceId, remoteJid])
  @@index([instanceId])
  @@index([remoteJid])
}

model Chatwoot {
  id                      String    @id
  enabled                 Boolean?  @default(true)
  accountId               String?   @db.VarChar(100)
  token                   String?   @db.VarChar(100)
  url                     String?   @db.VarChar(500)
  nameInbox               String?   @db.VarChar(100)
  signMsg                 Boolean?  @default(false)
  signDelimiter           String?   @db.VarChar(100)
  number                  String?   @db.VarChar(100)
  reopenConversation      Boolean?  @default(false)
  conversationPending     Boolean?  @default(false)
  mergeBrazilContacts     Boolean?  @default(false)
  importContacts          Boolean?  @default(false)
  importMessages          Boolean?  @default(false)
  daysLimitImportMessages Int?
  organization            String?   @db.VarChar(100)
  logo                    String?   @db.VarChar(500)
  ignoreJids              String?   @db.LongText
  createdAt               DateTime? @default(now()) @db.Timestamp(0)
  updatedAt               DateTime  @db.Timestamp(0)
  instanceId              String    @unique
  Instance                Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model Clients {
  id          Int             @id @default(autoincrement())
  nome        String          @db.VarChar(255)
  cpf_cnpj    String?         @db.VarChar(255)
  email       String          @db.VarChar(255)
  endereco    String?         @db.VarChar(255)
  numero      String?         @db.VarChar(255)
  bairro      String?         @db.VarChar(255)
  cidade      String?         @db.VarChar(255)
  estado      String?         @db.VarChar(255)
  cep         String?         @db.VarChar(255)
  phone       String?         @db.VarChar(255)
  status      Clients_status? @default(ativo)
  assinaturas assinaturas[]
  invoices    invoices[]
}

model Contact {
  id            String    @id
  remoteJid     String    @db.VarChar(100)
  pushName      String?   @db.VarChar(100)
  profilePicUrl String?   @db.VarChar(500)
  createdAt     DateTime? @default(now()) @db.Timestamp(0)
  updatedAt     DateTime? @db.Timestamp(0)
  instanceId    String
  Instance      Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@unique([remoteJid, instanceId])
  @@index([instanceId])
  @@index([remoteJid])
}

model Dify {
  id              String                @id
  enabled         Boolean               @default(true)
  description     String?               @db.VarChar(255)
  botType         Dify_botType
  apiUrl          String?               @db.VarChar(255)
  apiKey          String?               @db.VarChar(255)
  expire          Int?                  @default(0)
  keywordFinish   String?               @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?               @db.VarChar(100)
  listeningFromMe Boolean?              @default(false)
  stopBotFromMe   Boolean?              @default(false)
  keepOpen        Boolean?              @default(false)
  debounceTime    Int?
  ignoreJids      String?               @db.LongText
  splitMessages   Boolean?              @default(false)
  timePerChar     Int?                  @default(50)
  triggerType     Dify_triggerType?
  triggerOperator Dify_triggerOperator?
  triggerValue    String?
  createdAt       DateTime?             @default(now()) @db.Timestamp(0)
  updatedAt       DateTime              @db.Timestamp(0)
  instanceId      String
  Instance        Instance              @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  DifySetting     DifySetting[]

  @@index([instanceId], map: "Dify_instanceId_fkey")
}

model DifySetting {
  id              String    @id
  expire          Int?      @default(0)
  keywordFinish   String?   @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?   @db.VarChar(100)
  listeningFromMe Boolean?  @default(false)
  stopBotFromMe   Boolean?  @default(false)
  keepOpen        Boolean?  @default(false)
  debounceTime    Int?
  ignoreJids      String?   @db.LongText
  splitMessages   Boolean?  @default(false)
  timePerChar     Int?      @default(50)
  createdAt       DateTime? @default(now()) @db.Timestamp(0)
  updatedAt       DateTime  @db.Timestamp(0)
  difyIdFallback  String?   @db.VarChar(100)
  instanceId      String    @unique
  Dify            Dify?     @relation(fields: [difyIdFallback], references: [id])
  Instance        Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([difyIdFallback], map: "DifySetting_difyIdFallback_fkey")
}

model Evoai {
  id              String                 @id
  enabled         Boolean                @default(true)
  description     String?                @db.VarChar(255)
  agentUrl        String?                @db.VarChar(255)
  apiKey          String?                @db.VarChar(255)
  expire          Int?                   @default(0)
  keywordFinish   String?                @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?                @db.VarChar(100)
  listeningFromMe Boolean?               @default(false)
  stopBotFromMe   Boolean?               @default(false)
  keepOpen        Boolean?               @default(false)
  debounceTime    Int?
  ignoreJids      String?                @db.LongText
  splitMessages   Boolean?               @default(false)
  timePerChar     Int?                   @default(50)
  triggerType     Evoai_triggerType?
  triggerOperator Evoai_triggerOperator?
  triggerValue    String?
  createdAt       DateTime?              @default(now()) @db.Timestamp(0)
  updatedAt       DateTime               @db.Timestamp(0)
  instanceId      String
  Instance        Instance               @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  EvoaiSetting    EvoaiSetting[]

  @@index([instanceId], map: "Evoai_instanceId_fkey")
}

model EvoaiSetting {
  id              String    @id
  expire          Int?      @default(0)
  keywordFinish   String?   @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?   @db.VarChar(100)
  listeningFromMe Boolean?  @default(false)
  stopBotFromMe   Boolean?  @default(false)
  keepOpen        Boolean?  @default(false)
  debounceTime    Int?
  ignoreJids      String?   @db.LongText
  splitMessages   Boolean?  @default(false)
  timePerChar     Int?      @default(50)
  createdAt       DateTime? @default(now()) @db.Timestamp(0)
  updatedAt       DateTime  @db.Timestamp(0)
  evoaiIdFallback String?   @db.VarChar(100)
  instanceId      String    @unique
  Evoai           Evoai?    @relation(fields: [evoaiIdFallback], references: [id])
  Instance        Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([evoaiIdFallback], map: "EvoaiSetting_evoaiIdFallback_fkey")
}

model EvolutionBot {
  id                  String                        @id
  enabled             Boolean                       @default(true)
  description         String?                       @db.VarChar(255)
  apiUrl              String?                       @db.VarChar(255)
  apiKey              String?                       @db.VarChar(255)
  expire              Int?                          @default(0)
  keywordFinish       String?                       @db.VarChar(100)
  delayMessage        Int?
  unknownMessage      String?                       @db.VarChar(100)
  listeningFromMe     Boolean?                      @default(false)
  stopBotFromMe       Boolean?                      @default(false)
  keepOpen            Boolean?                      @default(false)
  debounceTime        Int?
  ignoreJids          String?                       @db.LongText
  splitMessages       Boolean?                      @default(false)
  timePerChar         Int?                          @default(50)
  triggerType         EvolutionBot_triggerType?
  triggerOperator     EvolutionBot_triggerOperator?
  triggerValue        String?
  createdAt           DateTime?                     @default(now()) @db.Timestamp(0)
  updatedAt           DateTime                      @db.Timestamp(0)
  instanceId          String
  Instance            Instance                      @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  EvolutionBotSetting EvolutionBotSetting[]

  @@index([instanceId], map: "EvolutionBot_instanceId_fkey")
}

model EvolutionBotSetting {
  id              String        @id
  expire          Int?          @default(0)
  keywordFinish   String?       @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?       @db.VarChar(100)
  listeningFromMe Boolean?      @default(false)
  stopBotFromMe   Boolean?      @default(false)
  keepOpen        Boolean?      @default(false)
  debounceTime    Int?
  ignoreJids      String?       @db.LongText
  splitMessages   Boolean?      @default(false)
  timePerChar     Int?          @default(50)
  createdAt       DateTime?     @default(now()) @db.Timestamp(0)
  updatedAt       DateTime      @db.Timestamp(0)
  botIdFallback   String?       @db.VarChar(100)
  instanceId      String        @unique
  EvolutionBot    EvolutionBot? @relation(fields: [botIdFallback], references: [id])
  Instance        Instance      @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([botIdFallback], map: "EvolutionBotSetting_botIdFallback_fkey")
}

model Flowise {
  id              String                   @id
  enabled         Boolean                  @default(true)
  description     String?                  @db.VarChar(255)
  apiUrl          String?                  @db.VarChar(255)
  apiKey          String?                  @db.VarChar(255)
  expire          Int?                     @default(0)
  keywordFinish   String?                  @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?                  @db.VarChar(100)
  listeningFromMe Boolean?                 @default(false)
  stopBotFromMe   Boolean?                 @default(false)
  keepOpen        Boolean?                 @default(false)
  debounceTime    Int?
  ignoreJids      String?                  @db.LongText
  splitMessages   Boolean?                 @default(false)
  timePerChar     Int?                     @default(50)
  triggerType     Flowise_triggerType?
  triggerOperator Flowise_triggerOperator?
  triggerValue    String?
  createdAt       DateTime?                @default(now()) @db.Timestamp(0)
  updatedAt       DateTime                 @db.Timestamp(0)
  instanceId      String
  Instance        Instance                 @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  FlowiseSetting  FlowiseSetting[]

  @@index([instanceId], map: "Flowise_instanceId_fkey")
}

model FlowiseSetting {
  id                String    @id
  expire            Int?      @default(0)
  keywordFinish     String?   @db.VarChar(100)
  delayMessage      Int?
  unknownMessage    String?   @db.VarChar(100)
  listeningFromMe   Boolean?  @default(false)
  stopBotFromMe     Boolean?  @default(false)
  keepOpen          Boolean?  @default(false)
  debounceTime      Int?
  ignoreJids        String?   @db.LongText
  splitMessages     Boolean?  @default(false)
  timePerChar       Int?      @default(50)
  createdAt         DateTime? @default(now()) @db.Timestamp(0)
  updatedAt         DateTime  @db.Timestamp(0)
  flowiseIdFallback String?   @db.VarChar(100)
  instanceId        String    @unique
  Flowise           Flowise?  @relation(fields: [flowiseIdFallback], references: [id])
  Instance          Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([flowiseIdFallback], map: "FlowiseSetting_flowiseIdFallback_fkey")
}

model Instance {
  id                      String                    @id
  name                    String                    @unique @db.VarChar(255)
  connectionStatus        Instance_connectionStatus @default(open)
  ownerJid                String?                   @db.VarChar(100)
  profileName             String?                   @db.VarChar(100)
  profilePicUrl           String?                   @db.VarChar(500)
  integration             String?                   @db.VarChar(100)
  number                  String?                   @db.VarChar(100)
  businessId              String?                   @db.VarChar(100)
  token                   String?                   @db.VarChar(255)
  clientName              String?                   @db.VarChar(100)
  disconnectionReasonCode Int?
  disconnectionObject     String?                   @db.LongText
  disconnectionAt         DateTime?                 @db.Timestamp(0)
  createdAt               DateTime?                 @default(now()) @db.Timestamp(0)
  updatedAt               DateTime?                 @db.Timestamp(0)
  Chat                    Chat[]
  Chatwoot                Chatwoot?
  Contact                 Contact[]
  Dify                    Dify[]
  DifySetting             DifySetting?
  Evoai                   Evoai[]
  EvoaiSetting            EvoaiSetting?
  EvolutionBot            EvolutionBot[]
  EvolutionBotSetting     EvolutionBotSetting?
  Flowise                 Flowise[]
  FlowiseSetting          FlowiseSetting?
  IntegrationSession      IntegrationSession[]
  Kafka                   Kafka?
  Label                   Label[]
  Media                   Media[]
  Message                 Message[]
  MessageUpdate           MessageUpdate[]
  N8n                     N8n[]
  N8nSetting              N8nSetting?
  Nats                    Nats?
  OpenaiBot               OpenaiBot[]
  OpenaiCreds             OpenaiCreds[]
  OpenaiSetting           OpenaiSetting?
  Proxy                   Proxy?
  Pusher                  Pusher?
  Rabbitmq                Rabbitmq?
  Session                 Session?
  Setting                 Setting?
  Sqs                     Sqs?
  Template                Template[]
  Typebot                 Typebot[]
  TypebotSetting          TypebotSetting?
  Webhook                 Webhook?
  Websocket               Websocket?
}

model IntegrationSession {
  id         String                    @id
  sessionId  String                    @db.VarChar(255)
  remoteJid  String                    @db.VarChar(100)
  pushName   String?
  status     IntegrationSession_status
  awaitUser  Boolean                   @default(false)
  context    String?                   @db.LongText
  type       String?                   @db.VarChar(100)
  createdAt  DateTime?                 @default(now()) @db.Timestamp(0)
  updatedAt  DateTime                  @db.Timestamp(0)
  instanceId String
  parameters String?                   @db.LongText
  botId      String?
  Instance   Instance                  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  Message    Message[]

  @@index([instanceId], map: "IntegrationSession_instanceId_fkey")
}

model IsOnWhatsapp {
  id         String   @id
  remoteJid  String   @unique @db.VarChar(100)
  jidOptions String
  createdAt  DateTime @default(now()) @db.Timestamp(0)
  updatedAt  DateTime @db.Timestamp(0)
}

model Kafka {
  id         String    @id
  enabled    Boolean   @default(false)
  events     String    @db.LongText
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model Label {
  id           String    @id
  labelId      String?   @db.VarChar(100)
  name         String    @db.VarChar(100)
  color        String    @db.VarChar(100)
  predefinedId String?   @db.VarChar(100)
  createdAt    DateTime? @default(now()) @db.Timestamp(0)
  updatedAt    DateTime  @db.Timestamp(0)
  instanceId   String
  Instance     Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([instanceId], map: "Label_instanceId_fkey")
}

model Media {
  id         String    @id
  fileName   String    @db.VarChar(500)
  type       String    @db.VarChar(100)
  mimetype   String    @db.VarChar(100)
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  messageId  String    @unique
  instanceId String
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  Message    Message   @relation(fields: [messageId], references: [id], onDelete: Cascade)

  @@index([instanceId], map: "Media_instanceId_fkey")
}

model Message {
  id                           String              @id
  key                          String              @db.LongText
  pushName                     String?             @db.VarChar(100)
  participant                  String?             @db.VarChar(100)
  messageType                  String              @db.VarChar(100)
  message                      String              @db.LongText
  contextInfo                  String?             @db.LongText
  source                       Message_source
  messageTimestamp             Int
  chatwootMessageId            Int?
  chatwootInboxId              Int?
  chatwootConversationId       Int?
  chatwootContactInboxSourceId String?             @db.VarChar(100)
  chatwootIsRead               Boolean?            @default(false)
  instanceId                   String
  typebotSessionId             String?
  webhookUrl                   String?             @db.VarChar(500)
  status                       String?             @db.VarChar(30)
  sessionId                    String?
  Media                        Media?
  Instance                     Instance            @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  IntegrationSession           IntegrationSession? @relation(fields: [sessionId], references: [id])
  MessageUpdate                MessageUpdate[]

  @@index([instanceId])
  @@index([sessionId], map: "Message_sessionId_fkey")
}

model MessageUpdate {
  id          String   @id
  keyId       String   @db.VarChar(100)
  remoteJid   String   @db.VarChar(100)
  fromMe      Boolean
  participant String?  @db.VarChar(100)
  pollUpdates String?  @db.LongText
  status      String   @db.VarChar(30)
  messageId   String
  instanceId  String
  Instance    Instance @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  Message     Message  @relation(fields: [messageId], references: [id], onDelete: Cascade)

  @@index([instanceId])
  @@index([messageId])
}

model N8n {
  id              String               @id
  enabled         Boolean              @default(true)
  description     String?              @db.VarChar(255)
  webhookUrl      String?              @db.VarChar(255)
  basicAuthUser   String?              @db.VarChar(255)
  basicAuthPass   String?              @db.VarChar(255)
  expire          Int?                 @default(0)
  keywordFinish   String?              @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?              @db.VarChar(100)
  listeningFromMe Boolean?             @default(false)
  stopBotFromMe   Boolean?             @default(false)
  keepOpen        Boolean?             @default(false)
  debounceTime    Int?
  ignoreJids      String?              @db.LongText
  splitMessages   Boolean?             @default(false)
  timePerChar     Int?                 @default(50)
  triggerType     N8n_triggerType?
  triggerOperator N8n_triggerOperator?
  triggerValue    String?
  createdAt       DateTime?            @default(now()) @db.Timestamp(0)
  updatedAt       DateTime             @db.Timestamp(0)
  instanceId      String
  Instance        Instance             @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  N8nSetting      N8nSetting[]

  @@index([instanceId], map: "N8n_instanceId_fkey")
}

model N8nSetting {
  id              String    @id
  expire          Int?      @default(0)
  keywordFinish   String?   @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?   @db.VarChar(100)
  listeningFromMe Boolean?  @default(false)
  stopBotFromMe   Boolean?  @default(false)
  keepOpen        Boolean?  @default(false)
  debounceTime    Int?
  ignoreJids      String?   @db.LongText
  splitMessages   Boolean?  @default(false)
  timePerChar     Int?      @default(50)
  createdAt       DateTime? @default(now()) @db.Timestamp(0)
  updatedAt       DateTime  @db.Timestamp(0)
  n8nIdFallback   String?   @db.VarChar(100)
  instanceId      String    @unique
  Instance        Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  N8n             N8n?      @relation(fields: [n8nIdFallback], references: [id])

  @@index([n8nIdFallback], map: "N8nSetting_n8nIdFallback_fkey")
}

model Nats {
  id         String    @id
  enabled    Boolean   @default(false)
  events     String    @db.LongText
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model OpenaiBot {
  id                String                     @id
  enabled           Boolean                    @default(true)
  description       String?                    @db.VarChar(255)
  botType           OpenaiBot_botType
  assistantId       String?                    @db.VarChar(255)
  functionUrl       String?                    @db.VarChar(500)
  model             String?                    @db.VarChar(100)
  systemMessages    String?                    @db.LongText
  assistantMessages String?                    @db.LongText
  userMessages      String?                    @db.LongText
  maxTokens         Int?
  expire            Int?                       @default(0)
  keywordFinish     String?                    @db.VarChar(100)
  delayMessage      Int?
  unknownMessage    String?                    @db.VarChar(100)
  listeningFromMe   Boolean?                   @default(false)
  stopBotFromMe     Boolean?                   @default(false)
  keepOpen          Boolean?                   @default(false)
  debounceTime      Int?
  ignoreJids        String?                    @db.LongText
  splitMessages     Boolean?                   @default(false)
  timePerChar       Int?                       @default(50)
  triggerType       OpenaiBot_triggerType?
  triggerOperator   OpenaiBot_triggerOperator?
  triggerValue      String?
  createdAt         DateTime?                  @default(now()) @db.Timestamp(0)
  updatedAt         DateTime                   @db.Timestamp(0)
  openaiCredsId     String
  instanceId        String
  Instance          Instance                   @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  OpenaiCreds       OpenaiCreds                @relation(fields: [openaiCredsId], references: [id], onDelete: Cascade)
  OpenaiSetting     OpenaiSetting[]

  @@index([instanceId], map: "OpenaiBot_instanceId_fkey")
  @@index([openaiCredsId], map: "OpenaiBot_openaiCredsId_fkey")
}

model OpenaiCreds {
  id            String         @id
  name          String?        @unique @db.VarChar(255)
  apiKey        String?        @unique @db.VarChar(255)
  createdAt     DateTime?      @default(now()) @db.Timestamp(0)
  updatedAt     DateTime       @db.Timestamp(0)
  instanceId    String
  OpenaiBot     OpenaiBot[]
  Instance      Instance       @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  OpenaiSetting OpenaiSetting?

  @@index([instanceId], map: "OpenaiCreds_instanceId_fkey")
}

model OpenaiSetting {
  id               String      @id
  expire           Int?        @default(0)
  keywordFinish    String?     @db.VarChar(100)
  delayMessage     Int?
  unknownMessage   String?     @db.VarChar(100)
  listeningFromMe  Boolean?    @default(false)
  stopBotFromMe    Boolean?    @default(false)
  keepOpen         Boolean?    @default(false)
  debounceTime     Int?
  ignoreJids       String?     @db.LongText
  splitMessages    Boolean?    @default(false)
  timePerChar      Int?        @default(50)
  speechToText     Boolean?    @default(false)
  createdAt        DateTime?   @default(now()) @db.Timestamp(0)
  updatedAt        DateTime    @db.Timestamp(0)
  openaiCredsId    String      @unique
  openaiIdFallback String?     @db.VarChar(100)
  instanceId       String      @unique
  Instance         Instance    @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  OpenaiCreds      OpenaiCreds @relation(fields: [openaiCredsId], references: [id])
  OpenaiBot        OpenaiBot?  @relation(fields: [openaiIdFallback], references: [id])

  @@index([openaiIdFallback], map: "OpenaiSetting_openaiIdFallback_fkey")
}

model Proxy {
  id         String    @id
  enabled    Boolean   @default(false)
  host       String    @db.VarChar(100)
  port       String    @db.VarChar(100)
  protocol   String    @db.VarChar(100)
  username   String    @db.VarChar(100)
  password   String    @db.VarChar(100)
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model Pusher {
  id         String    @id
  enabled    Boolean   @default(false)
  appId      String    @db.VarChar(100)
  key        String    @db.VarChar(100)
  secret     String    @db.VarChar(100)
  cluster    String    @db.VarChar(100)
  useTLS     Boolean   @default(false)
  events     String    @db.LongText
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model Rabbitmq {
  id         String    @id
  enabled    Boolean   @default(false)
  events     String    @db.LongText
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model Session {
  id        String   @id
  sessionId String   @unique
  creds     String?  @db.Text
  createdAt DateTime @default(now()) @db.Timestamp(0)
  Instance  Instance @relation(fields: [sessionId], references: [id], onDelete: Cascade)
}

model Setting {
  id              String    @id
  rejectCall      Boolean   @default(false)
  msgCall         String?   @db.VarChar(100)
  groupsIgnore    Boolean   @default(false)
  alwaysOnline    Boolean   @default(false)
  readMessages    Boolean   @default(false)
  readStatus      Boolean   @default(false)
  syncFullHistory Boolean   @default(false)
  wavoipToken     String?   @db.VarChar(100)
  createdAt       DateTime? @default(now()) @db.Timestamp(0)
  updatedAt       DateTime  @db.Timestamp(0)
  instanceId      String    @unique
  Instance        Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([instanceId])
}

model Sqs {
  id         String    @id
  enabled    Boolean   @default(false)
  events     String    @db.LongText
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model Template {
  id         String    @id
  templateId String    @unique @db.VarChar(255)
  name       String    @unique @db.VarChar(255)
  template   String    @db.LongText
  webhookUrl String?   @db.VarChar(500)
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([instanceId], map: "Template_instanceId_fkey")
}

model Typebot {
  id              String                   @id
  enabled         Boolean                  @default(true)
  description     String?                  @db.VarChar(255)
  url             String                   @db.VarChar(500)
  typebot         String                   @db.VarChar(100)
  expire          Int?                     @default(0)
  keywordFinish   String?                  @db.VarChar(100)
  delayMessage    Int?
  unknownMessage  String?                  @db.VarChar(100)
  listeningFromMe Boolean?                 @default(false)
  stopBotFromMe   Boolean?                 @default(false)
  keepOpen        Boolean?                 @default(false)
  debounceTime    Int?
  createdAt       DateTime?                @default(now()) @db.Timestamp(0)
  updatedAt       DateTime?                @db.Timestamp(0)
  ignoreJids      String?                  @db.LongText
  triggerType     Typebot_triggerType?
  triggerOperator Typebot_triggerOperator?
  triggerValue    String?
  instanceId      String
  Instance        Instance                 @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  TypebotSetting  TypebotSetting[]

  @@index([instanceId], map: "Typebot_instanceId_fkey")
}

model TypebotSetting {
  id                String    @id
  expire            Int?      @default(0)
  keywordFinish     String?   @db.VarChar(100)
  delayMessage      Int?
  unknownMessage    String?   @db.VarChar(100)
  listeningFromMe   Boolean?  @default(false)
  stopBotFromMe     Boolean?  @default(false)
  keepOpen          Boolean?  @default(false)
  debounceTime      Int?
  typebotIdFallback String?   @db.VarChar(100)
  ignoreJids        String?   @db.LongText
  createdAt         DateTime? @default(now()) @db.Timestamp(0)
  updatedAt         DateTime  @db.Timestamp(0)
  instanceId        String    @unique
  Instance          Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
  Typebot           Typebot?  @relation(fields: [typebotIdFallback], references: [id])

  @@index([typebotIdFallback], map: "TypebotSetting_typebotIdFallback_fkey")
}

model Webhook {
  id              String    @id
  url             String    @db.VarChar(500)
  headers         String?   @db.LongText
  enabled         Boolean?  @default(true)
  events          String?   @db.LongText
  webhookByEvents Boolean?  @default(false)
  webhookBase64   Boolean?  @default(false)
  createdAt       DateTime? @default(now()) @db.Timestamp(0)
  updatedAt       DateTime  @db.Timestamp(0)
  instanceId      String    @unique
  Instance        Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)

  @@index([instanceId])
}

model Websocket {
  id         String    @id
  enabled    Boolean   @default(false)
  events     String    @db.LongText
  createdAt  DateTime? @default(now()) @db.Timestamp(0)
  updatedAt  DateTime  @db.Timestamp(0)
  instanceId String    @unique
  Instance   Instance  @relation(fields: [instanceId], references: [id], onDelete: Cascade)
}

model assinaturas {
  id                      Int                          @id @default(autoincrement())
  cliente_id              Int
  valor                   Decimal                      @db.Decimal(10, 2)
  vencimento_dia          Int
  metodo_pagamento        assinaturas_metodo_pagamento
  tipo                    assinaturas_tipo             @default(mensal)
  data_primeiro_pagamento DateTime?                    @db.Date
  envio_dia               Int?
  dia_semana              assinaturas_dia_semana?
  desconto                Decimal?                     @db.Decimal(10, 2)
  desconto_tipo           assinaturas_desconto_tipo?
  multa                   Decimal?                     @db.Decimal(10, 2)
  multa_tipo              assinaturas_multa_tipo?
  juros                   Decimal?                     @db.Decimal(10, 2)
  juros_tipo              assinaturas_juros_tipo?
  nome_cobranca           String?                      @db.VarChar(255)
  status                  assinaturas_status           @default(ativo)
  criado_em               DateTime                     @db.DateTime(0)
  atualizado_em           DateTime                     @db.DateTime(0)
  Clients                 Clients                      @relation(fields: [cliente_id], references: [id], onDelete: Cascade, map: "assinaturas_ibfk_1")
  invoices                invoices[]

  @@index([cliente_id], map: "cliente_id")
}

model clientes {
  id       Int     @id @default(autoincrement())
  nome     String? @db.VarChar(255)
  cpf_cnpj String? @db.VarChar(20)
  email    String? @db.VarChar(255)
  telefone String? @db.VarChar(20)
  endereco String? @db.Text
  numero   String  @db.Text
  bairro   String  @db.Text
  cidade   String  @db.Text
  estado   String  @db.Text
  cep      Int
  whatsapp String? @db.VarChar(20)
  status   String? @default("ativo") @db.VarChar(20)
}

model invoices {
  id              Int                     @id @default(autoincrement())
  subscription_id Int?
  cliente_id      Int
  amount          Decimal                 @db.Decimal(10, 2)
  due_date        DateTime                @db.Date
  paid_date       DateTime?               @db.DateTime(0)
  status          invoices_status?        @default(pending)
  payment_method  invoices_payment_method
  payment_url     String?                 @db.VarChar(255)
  payment_code    String?                 @db.Text
  payment_details String?                 @db.LongText
  provider_id     String?                 @db.VarChar(255)
  title           String?                 @db.VarChar(255)
  public_link     String?                 @db.VarChar(255)
  notifications   String?                 @db.LongText
  sent            Boolean?                @default(false)
  createdAt       DateTime                @db.DateTime(0)
  updatedAt       DateTime                @db.DateTime(0)
  assinaturas     assinaturas?            @relation(fields: [subscription_id], references: [id], map: "invoices_ibfk_1")
  Clients         Clients                 @relation(fields: [cliente_id], references: [id], onDelete: Cascade, map: "invoices_ibfk_2")

  @@index([cliente_id], map: "cliente_id")
  @@index([subscription_id], map: "subscription_id")
}

model usuarios {
  id     Int              @id @default(autoincrement())
  nome   String           @db.VarChar(255)
  email  String           @unique(map: "email") @db.VarChar(255)
  senha  String           @db.VarChar(255)
  status usuarios_status? @default(ativo)
  role   usuarios_role?   @default(user)
}

enum Instance_connectionStatus {
  open
  close
  connecting
}

enum OpenaiBot_botType {
  assistant
  chatCompletion
}

enum Dify_botType {
  chatBot
  textGenerator
  agent
  workflow
}

enum assinaturas_metodo_pagamento {
  boleto
  pix
}

enum usuarios_status {
  ativo
  inativo
}

enum IntegrationSession_status {
  opened
  closed
  paused
}

enum assinaturas_tipo {
  mensal
  semanal
  quinzenal
}

enum usuarios_role {
  admin
  user
}

enum invoices_status {
  pending
  paid
  overdue
  canceled
}

enum invoices_payment_method {
  boleto
  pix
}

enum Message_source {
  ios
  android
  web
  unknown
  desktop
}

enum assinaturas_dia_semana {
  domingo
  segunda
  terca
  quarta
  quinta
  sexta
  sabado
}

enum assinaturas_desconto_tipo {
  percentual
  valor
}

enum Clients_status {
  ativo
  inativo
}

enum assinaturas_multa_tipo {
  percentual
  valor
}

enum assinaturas_juros_tipo {
  percentual
  valor
}

enum Typebot_triggerType {
  all
  keyword
  none
  advanced
}

enum EvolutionBot_triggerType {
  all
  keyword
  none
  advanced
}

enum assinaturas_status {
  ativo
  inativo
  cancelado
}

enum Flowise_triggerType {
  all
  keyword
  none
  advanced
}

enum Evoai_triggerType {
  all
  keyword
  none
  advanced
}

enum Typebot_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}

enum EvolutionBot_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}

enum Flowise_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}

enum Evoai_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}

enum N8n_triggerType {
  all
  keyword
  none
  advanced
}

enum Dify_triggerType {
  all
  keyword
  none
  advanced
}

enum N8n_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}

enum Dify_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}

enum OpenaiBot_triggerType {
  all
  keyword
  none
  advanced
}

enum OpenaiBot_triggerOperator {
  contains
  equals
  startsWith
  endsWith
  regex
}
